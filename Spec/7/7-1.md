#### 7.1 MBTI診断方式とロジック

MBTIは以下の4軸（8タイプ）から成り立つ：

| 軸名  | 左                | 右                |
| --- | ---------------- | ---------------- |
| E-I | 外向（Extraversion） | 内向（Introversion） |
| S-N | 現実（Sensing）      | 直感（iNtuition）    |
| T-F | 思考（Thinking）     | 感情（Feeling）      |
| J-P | 判断（Judging）      | 知覚（Perceiving）   |

#### 7.1.1 診断質問と構成

診断には、以下の16問のスライダー質問を使用する。各軸に異なる観点で2問ずつ設けられている。

| 質問番号 | 軸   | 内容（左 = 前者、右 = 後者）                   |
| ---- | --- | ----------------------------------- |
| Q1   | E-I | 初対面の人ともすぐ話せるタイプ？ ←→ 少し様子を見てから話すタイプ？ |
| Q2   | S-N | 話すときは具体的な話が多い？ ←→ 抽象的な話が好き？         |
| Q3   | T-F | 決断は論理で考える？ ←→ 気持ちを重視する？             |
| Q4   | J-P | 計画通りに物事を進めたいタイプ？ ←→ 成り行きに任せたいタイプ？   |
| Q5   | E-I | にぎやかな場が好き？ ←→ 一人の時間のほうが落ち着く？        |
| Q6   | S-N | 今の現実を大事にする？ ←→ 未来や可能性を考える？          |
| Q7   | T-F | はっきり意見を伝える方？ ←→ 相手の気持ちを優先する方？       |
| Q8   | J-P | 予定を立てるのが得意？ ←→ その場の流れで動きたい？         |
| Q9   | E-I | 話すことで元気になる？ ←→ 話すと疲れる？              |
| Q10  | S-N | 実体験や事実をもとに話す？ ←→ たとえ話や例えが多い？        |
| Q11  | T-F | まず事実を整理してから判断する？ ←→ 感情の動きに従う？       |
| Q12  | J-P | 物事をきっちり終わらせたい？ ←→ とりあえず動いてみたい？      |
| Q13  | E-I | 大人数の中でも自分を出せる？ ←→ 少人数の方が安心？         |
| Q14  | S-N | 現実的な人だと言われる？ ←→ 空想的だと言われる？          |
| Q15  | T-F | 冷静だねと言われる？ ←→ 優しいねと言われる？            |
| Q16  | J-P | 決断は早い方？ ←→ 保留にしがち？                  |

※ プレイヤーは各質問に対して0〜4のスライダーで回答する。

* 0 = 明確に左タイプに当てはまる
* 4 = 明確に右タイプに当てはまる
* 2 = 中間・どちらとも言えない

#### 7.1.2 スコア判定ロジック

* 各軸には2つの質問（スライダー値0〜4）が紐づく
* 合計値 `0〜8` によって左右どちらの傾向かを判定する

| 合計値   | 判定             |
| ----- | -------------- |
| 0〜4   | 左側（E, S, T, J） |
| 5〜8   | 右側（I, N, F, P） |
| ちょうど4 | 補助値でブレーク       |

#### 補助値によるブレーク（score = 4 の場合）

* E-I 軸 → 社交性（personality.social） >= 4 → E、<4 → I
* S-N 軸 → 表現力（personality.expressiveness） >= 4 → N、<4 → S
* T-F 軸 → 気配り（personality.kindness） >= 4 → F、<4 → T
* J-P 軸 → 行動力（personality.activity） >= 4 → J、<4 → P

#### 7.1.3 判定スクリプト例

```ts
const determineType = (score, fallback) => {
  if (score < 4) return 'L';
  if (score > 4) return 'R';
  return fallback >= 4 ? 'L' : 'R';
};

const mbti = [
  determineType(q1 + q5, social) === 'L' ? 'E' : 'I',
  determineType(q2 + q6, expressiveness) === 'L' ? 'S' : 'N',
  determineType(q3 + q7, kindness) === 'L' ? 'T' : 'F',
  determineType(q4 + q8, activity) === 'L' ? 'J' : 'P'
].join('');
```

#### 7.1.4 保存形式

* `mbti`：4文字タイプ（例："INFP"）
* `mbti_slider`：16項目（Q1〜Q16）のスライダー値（0〜4）を順に格納した配列
* 補助値（社交性など）は `personality` フィールドに含まれており、外部参照可能

MBTIは以下の4軸（8タイプ）から成り立つ：

| 軸名  | 左                | 右                |
| --- | ---------------- | ---------------- |
| E-I | 外向（Extraversion） | 内向（Introversion） |
| S-N | 現実（Sensing）      | 直感（iNtuition）    |
| T-F | 思考（Thinking）     | 感情（Feeling）      |
| J-P | 判断（Judging）      | 知覚（Perceiving）   |

##### 診断方式：

* 各軸に **2問**ずつ、計16問のスライダー質問を用意
* スライダーは **5段階（0〜4）** で、左寄りが前者、右寄りが後者に近いことを示す

##### スコア計算：

* 各軸ごとに2つのスライダー値（例：E-Iは質問1と5）を合計し、範囲 `0〜8` のスコアとする
* **0〜4の場合は左側（E/S/T/J）、5〜8は右側（I/N/F/P）** と判定
* **ちょうど4のとき**は性格値（行動力や社交性）によってブレーク：

  * 例：社交性4以上 → E、未満 → I

##### MBTI構築例：

```ts
const score_EI = q1 + q5;
const score_SN = q2 + q6;
const score_TF = q3 + q7;
const score_JP = q4 + q8;

MBTI = (score_EI >= 5 ? 'I' : 'E') +
       (score_SN >= 5 ? 'N' : 'S') +
       (score_TF >= 5 ? 'F' : 'T') +
       (score_JP >= 5 ? 'P' : 'J');
```

##### 保存形式：

* `mbti`：例「INFP」
* `mbti_slider`：質問ごとのスライダー値（0〜4）×16個の配列