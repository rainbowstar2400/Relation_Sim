# テキストベース人間関係シミュレーション仕様書（最新版）

## 🧭 概要

* **ジャンル**：テキストベースの生活・人間関係シミュレーション
* **プレイヤーの立場**：登場人物たちを見守る「管理人（媒体越しの上位存在）」
* **主な特徴**：画像やアバターなし。性格や関係性に基づく会話やイベントを中心に展開。
* **時間制御**：ゲーム内の時間は現実世界と同期。0:00に日付が切り替わる。
* **目標**：AIを活用し、登場人物たちの個性や関係性の変化を観察・記録しながら、感情豊かな人間模様を楽しむ。

---

## 🔧 システム構成

### キャラクター構造

* 名前
* 年齢（任意）
* 性別（任意）
* 性格（MBTI + 5段階スライダー質問による推定または指定）
* パラメータ（以下5項目／5段階スライダー）

  * 社交性（初対面・雑談イベント発生に関与）
  * 気配り傾向（感情ラベルや好感度変化に影響）
  * 頑固さ（対立イベントなどの影響）
  * 行動力（イベントの発端率）
  * 表現力（会話の長さや感情表現の豊かさ）
* 話し方（丁寧／砕けた／子どもっぽい等）
* 趣味・関心事
* 状態（気分／体調など）
* 好感度（キャラA→B 片方向・数値）
* プレイヤーへの信頼度（0～100）

---

## 🧩 関係性モデル

### 🏷 関係ラベル（双方向・全6段階）

* なし

* 認知（見かけたことがある、話には聞いている）

* 顔見知り

* 友達

* 親友

* 恋人

* 関係ラベルはキャラ同士で常に双方向同値。

* 「なし→認知→友達」などの初期段階は非関与イベントで自動変化。

* 「親友」「恋人」などはプレイヤー関与型イベントでのみ変化。

### 💫 感情ラベル（片方向・一人一つ）

* 普通（なし）

* 気になる（仲良くなりたい）

* 好きかも（付き合いたい）

* 嫌いかも

* 気まずい

* 感情ラベルは常に1つのみ保持（キャラA→B）。

* イベント、会話、時間経過などで変化。

---

## 💬 好感度・信頼度

* **好感度**：会話やイベントで増加。放置で自然減少。高いと一部イベントの発生率が上昇。
* **信頼度**：プレイヤーの助言・会話などで増減。
* **キャラ→プレイヤー間の感情ラベルは存在しない**。信頼度や性格により、プレイヤーの認識は「神」「友達」などに変わる。

---

## 🤖 GPT活用と会話生成

* GPT APIにより自然な会話・イベントテキストを生成。
* プロンプトには性格・関係性・状態・時間帯・好感度・信頼度などを反映。
* プレイヤーとの会話は単語穴埋め式定型文や選択肢式で対応。

---

## 🕒 時間とイベントの管理

* **時間進行**：現実時間と同期。ゲーム起動時刻に応じた場面設定がされる。
* **イベント分類**：

  * プレイヤー関与型（例：困りごとイベント）
  * プレイヤー非関与型（例：初対面・雑談など）
* **イベントの発生確率**：性格パラメータや関係ラベル、好感度、感情ラベルなどが影響。

### プレイヤー関与イベント（困りごとイベント）

* 毎日起動時に2件発生、その後ランダムに最大3件追加（合計最大5件／日）。
* 発生はログ外。対応結果のみログに反映。
* 助言形式：単語穴埋め or 選択肢式

### プレイヤー非関与イベント

| イベント種別  | 発生条件・特記事項                              |
| ------- | -------------------------------------- |
| 初対面     | 関係ラベルが「なし」または「認知」のとき                   |
| 雑談      | 「友達」「親友」「恋人」時に発生。発生確率に好感度・感情ラベルの影響なし   |
| 思い出し会話  | 「親友」「恋人」の方が発生しやすく、好感度・感情ラベルに依存         |
| 二人きりの時間 | 同上。「気になる」「好きかも」で発生率↑、「嫌いかも」「気まずい」で発生率↓ |

---

## 🗒 ログと日報

### ログ（CLI風）

* 表示形式：

  ```
  [08:42] EVENT: 莉音と咲が会話中…
            莉音「ねぇ、あの本、読んだ？」
            咲「えっ、まだだけど、面白かった？」
  [08:45] SYSTEM: 関係ラベルが「顔見知り」→「友達」に変化しました。
  [08:47] SYSTEM: 莉音→咲の感情ラベルが「気になる」に変化しました。
  ```
* セリフはインデント付き。独白なし。
* 困りごとイベントは対応結果のみ記録（発生通知はログ外）。

### 日報

* 0:00切り替えで自動生成。
* 「EVENT」「SYSTEM」行のみ表示（セリフ省略）
* キャラ別・種別・日付フィルターあり。日付はデフォルトで有効。

---

## 🎮 プレイヤー機能

* キャラ追加・編集・削除（フォーム式）
* 任意の2キャラ間の会話指示機能
* プレイヤーとの会話（助言・雑談）
* キャラステータス画面で関係・感情・好感度・信頼度を確認可能

---

## 🛠 技術メモ

* データ保存形式：JSON（キャラ、関係性、ログなど）
* GPT-3.5／4o対応切替可
* 性格診断形式：5段階スライダーによる質問（敬語でなくカジュアルな問い方）

---

## 🗂 優先度分類（ユーザー希望）

- **一緒に詰めたいもの**
1. 信頼度・好感度の数値変化ロジック
2. キャラ追加画面UI構成
3. ログ表示アニメーション・更新タイミング
4. プレイヤーへのフィードバック演出

- **中間（お任せもするが口も出したい）**
5. イベント中身の具体設計（基礎部分完了済）

- **ほぼお任せするもの**
6. ステータス画面構成
7. ログ・日報の保存フォーマット
8. キャラの感情表現バリエーション