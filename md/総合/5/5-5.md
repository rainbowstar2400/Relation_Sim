### 5.5 感情ラベルの抽選

本節では、イベント発生時における感情ラベルの変化抽選仕様について記述する。抽選結果により、キャラクターAからBへの感情ラベル（例：「気になる」「嫌いかも」など）が変化する可能性がある。

#### 5.5.1 抽選対象

A→B 間でイベントが発生した場合、その直後に感情ラベルの変化抽選が実施される。

なお、**「気になる」「嫌いかも」は減衰対象とする**。抽選によって他のラベルに遷移する可能性を残しつつ、自然変化も併用する。

#### 5.5.2 抽選処理の概要

1. 現在の感情ラベル、関係ラベルをもとに候補ラベルを取得
2. `5.4` で決定された雰囲気（mood）を取得し、候補ごとの重みを補正
3. 補正後の重みをもとに、確率的に1ラベルを抽選
4. 抽選結果が現在のラベルと異なる場合、ラベルを変更

#### 5.5.3 重みテーブル構造

感情ラベル抽選に用いる重みテーブルは以下の形式で管理される：

```json
{
  "relation_label": "friend",
  "emotion_label": "気になる",
  "table": {
    "positive_2": {
      "気になる": 50,
      "好きかも": 30,
      "なし": 20
    },
    "positive_1": { ... },
    "neutral": { ... },
    "negative_1": { ... },
    "negative_2": { ... }
  }
}
```

* `positive_2` などは雰囲気値 `2` を意味する（`very_positive`）
* 雰囲気値（-2〜+2）ごとに異なる重みが設定されている
* 重みの合計は100でなくてもよく、相対比で扱う

#### 5.5.4 雰囲気による補正の例

例：現在「気になる」で、雰囲気が -2（とてもネガティブ）の場合：

```json
{
  "気になる": 60,
  "なし": 40
}
```

→ 前向きな変化（「好きかも」など）が除外され、後退方向のみが候補となる

一方、雰囲気が +2（とてもポジティブ）の場合：

```json
{
  "気になる": 50,
  "好きかも": 30,
  "なし": 20
}
```

→ 上昇・後退の両方向が候補に含まれる

#### 5.5.5 実装備考

* 雰囲気に基づく重み補正は事前に定義されたテーブルに従う
* 抽選後にラベルが変化した場合は、ログ出力およびステータスに反映される