## 🧠 第5章：内部処理・抽選仕様（案）

この章では、ゲーム内部において各種イベントや数値変化、状態変化を制御する「内部処理」や「抽選ロジック」について記載する。プレイヤーの操作とは無関係に自動的に進行するシステム挙動を定義する。

---

### **5.1 イベント発生抽選**

* 対象：非関与型イベント（雑談・思い出し・二人きり・挨拶など）
* サブ構成案：

  * 5.1.1 候補ペアの生成ルール
  * 5.1.2 イベント種別の選定ロジック
  * 5.1.3 発生確率の調整要因（関係ラベル・性格など）
  * 5.1.4 その他制限・発生抑制条件（状態異常、同時発生不可など）

---

### **5.2 プレイヤー介入イベント（困りごと）の生成**

* 対象：プレイヤー介入型の一時イベント
* サブ構成案：

  * 5.2.1 イベント生成タイミングと頻度
  * 5.2.2 対象キャラクターの選定条件（信頼度、状態、重複防止）
  * 5.2.3 内容の選択と多様性（選択肢／穴埋めなど）
  * 5.2.4 時間経過による自動消滅処理

---

### **5.3 感情ラベルの抽選**

* 対象：イベント後に発生する感情変化
* サブ構成案：

  * 5.3.1 抽選対象となるイベント種別と条件
  * 5.3.2 抽選処理の具体ロジック（すでに整理済のものを統合）
  * 5.3.3 感情ラベルの自然リセットと更新処理

---

### **5.4 好感度・信頼度の変動**

* 対象：数値の上昇・自然減少の処理
* サブ構成案：

  * 5.4.1 好感度の変動ルール（イベントごとの固定変化値）
  * 5.4.2 自然減少の判定と処理
  * 5.4.3 信頼度の変動タイミングと非表示処理（UI上）

---

### **5.5 ラベル変化処理**

* 対象：関係ラベル・感情ラベルなどのステータス変化
* サブ構成案：

  * 5.5.1 関係ラベルの変化判定と発生イベント
  * 5.5.2 感情ラベルの変化との併用制御
  * 5.5.3 ラベル変化の記録と反映タイミング

---

### **5.6 その他の補助的処理（案）**

* 対象：あまり他に分類できない細かい内部処理群
* 内容例（必要があれば採用）：

  * キャラクターの状態（例：就寝中・風邪）の自動更新
  * 関係初期化時の好感度自動設定（例：案2）
  * ログ出力キューの管理方式（UI的には済んでいるが補足的に）

---