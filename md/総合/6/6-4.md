### 6.4 ログ・履歴の保存仕様

本節では、アプリ内で生成される各種イベントログ、状態変化ログ、及びそれらの保存形式について説明する。

#### 6.4.1 ログの種類

以下の種類のログが存在する：

| ログ種別 | 内容 | 表示場所 | 保存対象 |
|----------|------|----------|----------|
| イベントログ | キャラクター同士の会話やイベント発生 | メイン画面CLI風ログエリア | ログ履歴 |
| システムログ | 関係ラベル、感情ラベル、好感度等の変化通知 | メイン画面CLI風ログエリア | ログ履歴 |
| 介入イベント応答 | プレイヤーが選択した回答とその反応 | メイン画面CLI風ログエリア | ログ履歴 |
| 日報ログ | 各日終了時にまとめて出力されるイベント一覧 | 日報画面 | 日報履歴 |

#### 6.4.2 ログの保存形式

ログは日付ごとにまとめられ、以下のようなJSON形式で保存される：

```json
{
  "2025-07-01": [
    {
      "type": "event",
      "content": "EVENT: AとBが会話中…"
    },
    {
      "type": "system",
      "content": "SYSTEM: A→Bの印象が「気になる」に変化しました。"
    },
    {
      "type": "intervention",
      "content": "SYSTEM: Aからの相談に対して「こうすればいいんじゃない？」と回答"
    }
  ]
}
```

#### 6.4.3 保存場所・保存方針

- ログはブラウザローカルストレージまたはIndexedDBに保存される想定。
- エクスポート・インポート機能によって任意の外部保存・読み込みが可能。
- 日報は別途、日単位で履歴として記録される。

#### 6.4.4 日報の構造例

日報は以下のような簡潔な形式で記録される：

```json
{
  "date": "2025-07-01",
  "events": [
    "AとBが雑談した",
    "CとDが二人きりの時間を過ごした",
    "E→Fの印象が「気になる」に変化した"
  ]
}
```

#### 6.4.5 備考

- ログはユーザーの設定により非表示にすることも可能だが、内部的には常に保存されている。
- 感情ラベルや関係ラベルの変化ログは、システムログとして自動出力される。