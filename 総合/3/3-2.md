### 3.2 関係ラベルと初期関係

キャラクター同士の関係性は、**双方向同値の関係ラベル**によって管理される。これらのラベルは、特定のイベントまたは管理操作を通じて段階的に変化し、キャラクター間の親密度や関係の質を明確に表現するための指標である。

#### ■ 関係ラベルの定義と構造

関係ラベルは以下のような段階構造を持ち、キャラA⇄Bの間で同一のラベルが設定される：

```
なし → 認知 → 友達 → 親友 ／ 恋人 ／ 家族（排他的）
```

* **「なし」**：初期状態。互いを認識していない関係。
* **「認知」**：名前や姿を知っている状態。
* **「友達」**：基本的な信頼関係が構築された状態。
* **「親友」「恋人」**：高い信頼と特別な絆を意味する。

  * 「親友」は観察型イベントによって成立。
  * 「恋人」は**プレイヤー介入型イベント**（告白イベント）を通じてのみ成立。
* **「家族」**：他のすべての関係ラベルと**排他的**であり、同時に保持できない特別な関係。初期設定または管理室での手動設定によりのみ付与される。

#### ■ 関係ラベルの変化と発生イベント

関係ラベルは以下の遷移を通じて変化し、そのきっかけは**イベント発生**または**管理操作**による：

| 遷移      | 発生要因            | プレイヤー関与     |
| ------- | --------------- | ----------- |
| なし → 認知 | 挨拶イベント／時間経過     | 不要（自動）      |
| 認知 → 友達 | 「友達になるイベント（仮称）」 | 不要（観察型）     |
| 友達 → 親友 | 「親友になるイベント（仮称）」 | 不要（観察型）     |
| 友達 → 恋人 | 告白イベント          | **必要（介入型）** |
| ― → 家族  | 初期設定／管理室手動設定    | 任意（UI操作）    |

* \*\*「なし→認知」\*\*のみ時間経過やイベントでの自然変化が起こる。
* 「親友」は観察型イベントによってのみ到達し、プレイヤーの操作は不要。
* 「恋人」は**プレイヤーが選択肢などで関与することで成立**する唯一の関係ラベルである。
* 「家族」はイベントによって変化することはなく、明示的な設定によってのみ付与される。

#### ■ 関係ラベルの併存制限と優先順位

* **「親友」「恋人」「家族」**は**相互に排他的**であり、いずれか一つのみを保持可能。
* 特に「家族」関係を設定した場合、他の関係ラベルは同時に保持できない。
* 既存のラベルが存在する場合、「家族」ラベルを設定すると**既存ラベルは上書きされる**（逆も同様）。

#### ■ 解除と別れイベントの予定

関係ラベルは一方向に進むのみではなく、将来的には「別れ（仮称）」イベントなどを通じて**解除・逆転が可能となる予定**である。

* 例：「親友」→「友達」への降格など
* プレイヤーが関与する選択肢型イベントや、長期未接触による強制変化なども検討中。

（現時点では未実装であり、将来拡張に備えたフックのみを用意）

#### ■ 初期関係設定機能

関係ラベルは、キャラクター追加時または管理室画面において初期設定することが可能である。

* **追加時**：既存キャラとの関係性として「なし」「認知」「友達」「親友」「恋人」「家族」から選択可。
* **管理室**：後から「家族」を含む初期関係を再設定することも可能。
* イベントによる変化とは無関係に、プレイヤーが任意に調整できる。

#### ■ 表示と通知仕様

* 関係ラベルは、キャラステータス画面およびキャラ関係詳細画面に表示される。

  * ステータス画面では一覧形式で簡潔に表示。
  * 詳細画面では、ラベルの変化履歴を含めた経過を確認可能。
* ラベルが変化した際には、ログ上に以下のようなSYSTEM行が表示される：

```
SYSTEM: AとBの関係が『恋人』になりました。
```

---